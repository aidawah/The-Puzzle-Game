import"../chunks/CWj6FrbW.js";import{i as Q}from"../chunks/bcjE7qSF.js";import{at as R,au as U,V as X,av as Y,h as Z,o as _,aw as ee,p as re,a2 as ae,a0 as w,ax as D,ay as te,f as O,e as $,C as r,a as M,b as se,c as v,s as g,az as oe,F as S,as as le,r as c,aq as ne,ar as ie,aA as H}from"../chunks/BromKYUi.js";import{e as I,i as J}from"../chunks/YPtJtd91.js";import{r as x}from"../chunks/Cao8ahsq.js";import{g as z}from"../chunks/BE_MBlDK.js";import{c as de}from"../chunks/DbPWqESC.js";import{u as ue}from"../chunks/BTjBPz9F.js";function k(e,u,b=u){var m=R(),f=new WeakSet;U(e,"input",l=>{var t=l?e.defaultValue:e.value;if(t=q(e)?B(t):t,b(t),_!==null&&f.add(_),m&&t!==(t=u())){var C=e.selectionStart,y=e.selectionEnd;e.value=t??"",y!==null&&(e.selectionStart=C,e.selectionEnd=Math.min(y,e.value.length))}}),(Z&&e.defaultValue!==e.value||X(u)==null&&e.value)&&(b(q(e)?B(e.value):e.value),_!==null&&f.add(_)),Y(()=>{var l=u();if(e===document.activeElement){var t=ee??_;if(f.has(t))return}q(e)&&l===B(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function q(e){var u=e.type;return u==="number"||u==="range"}function B(e){return e===""?null:+e}var ce=O('<div class="aspect-square flex items-center justify-center rounded bg-gray-800 text-gray-100"> </div>'),fe=O('<fieldset class="space-y-2 rounded border border-gray-700 p-4"><legend class="px-2 text-gray-300"></legend> <input placeholder="one, two, three, four" class="w-full rounded border border-gray-600 bg-gray-800 p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/> <input placeholder="Clue/description" class="w-full rounded border border-gray-600 bg-gray-800 p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/></fieldset>'),ve=O('<main class="min-h-screen bg-gray-900 text-gray-100 p-4 md:p-8"><div class="mx-auto max-w-6xl space-y-6"><div class="flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0"><button class="w-full sm:w-auto rounded bg-gray-700 px-3 py-1 text-gray-200 hover:bg-gray-600">← Back to Board</button> <h2 class="text-lg font-semibold text-center">Create a New Puzzle</h2> <button class="w-full sm:w-auto rounded bg-green-600 px-3 py-1 text-white hover:bg-green-500">All Puzzles</button> <a href="/my-puzzles" class="hover:underline px-2 py-1 rounded hover:bg-gray-700">My Puzzles</a></div> <div class="flex flex-col md:flex-row gap-6"><div class="w-full md:w-1/2"><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1 sm:gap-2"></div></div> <div class="w-full md:w-1/2 space-y-6 overflow-auto max-h-[80vh]"><input placeholder="Puzzle Title" class="w-full rounded border border-gray-700 bg-gray-800 p-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/> <input placeholder="Author" class="w-full rounded border border-gray-700 bg-gray-800 p-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/> <!> <button class="w-full rounded bg-green-600 py-3 font-semibold text-white shadow hover:bg-green-500">Generate</button></div></div></div></main>');function xe(e,u){re(u,!1);const b=w();ae(ue)||z("/login");let m=w(""),f=w(""),l=w(Array.from({length:4},()=>({answersCsv:"",description:""}))),t=w({});async function C(){if(!r(m)||!r(f)){alert("Title and author are required.");return}const s={title:r(m),author:r(f),groups:r(l).map(o=>({answers:o.answersCsv.split(",").map(a=>a.trim()).filter(Boolean),description:o.description}))};if(!s.groups.every(o=>o.answers.length===4)){alert("Each group needs exactly 4 comma-separated words.");return}const n=await de(s);z(`/puzzles/${n}`)}D(()=>(r(l),r(t)),()=>{const s=[];r(l).forEach((a,i)=>{a.answersCsv.split(",").map(d=>d.trim()).forEach((d,p)=>{d&&s.push({key:`${i}-${p}`,word:d})})});for(const a of Object.keys(r(t)))s.some(i=>i.key===a)||delete r(t)[a];const n=new Set(Object.values(r(t))),o=Array.from({length:16},(a,i)=>i).filter(a=>!n.has(a));for(const{key:a}of s)if(!(a in r(t))&&o.length){const i=o.splice(Math.floor(Math.random()*o.length),1)[0];oe(t,r(t)[a]=i)}}),D(()=>(r(t),r(l)),()=>{S(b,(()=>{var n;const s=Array(16).fill("—");for(const[o,a]of Object.entries(r(t))){const[i,d]=o.split("-").map(Number),p=(n=r(l)[i])==null?void 0:n.answersCsv.split(",").map(h=>h.trim())[d];p&&(s[a]=p)}return s})())}),te(),Q();var y=ve(),V=v(y),A=v(V),G=v(A),K=g(G,4);le(2),c(A);var N=g(A,2),E=v(N),T=v(E);I(T,5,()=>r(b),J,(s,n)=>{var o=ce(),a=v(o,!0);c(o),ne(()=>ie(a,r(n))),M(s,o)}),c(T),c(E);var W=g(E,2),j=v(W);x(j);var P=g(j,2);x(P);var F=g(P,2);I(F,1,()=>r(l),J,(s,n,o)=>{var a=fe(),i=v(a);i.textContent=`Group ${o+1}`;var d=g(i,2);x(d);var p=g(d,2);x(p),c(a),k(d,()=>r(n).answersCsv,h=>(r(n).answersCsv=h,H(()=>r(l)))),k(p,()=>r(n).description,h=>(r(n).description=h,H(()=>r(l)))),M(s,a)});var L=g(F,2);c(W),c(N),c(V),c(y),$("click",G,()=>z("/")),$("click",K,()=>z("/puzzles")),k(j,()=>r(m),s=>S(m,s)),k(P,()=>r(f),s=>S(f,s)),$("click",L,C),M(e,y),se()}export{xe as component};
