import"../chunks/CWj6FrbW.js";import{i as J}from"../chunks/BntYITJV.js";import{aq as K,ar as L,M as Q,as as R,h as U,p as Y,Z as ee,X as h,at as X,au as re,f as O,e as M,A as r,a as P,b as ae,c as v,s as g,av as se,C as $,ap as te,r as f,an as oe,ao as le,aw as Z}from"../chunks/DfyscB-W.js";import{e as D,i as F}from"../chunks/DIZefaZn.js";import{r as w}from"../chunks/9ahP_F_U.js";import{g as x}from"../chunks/8teCs59O.js";import{c as ne}from"../chunks/CYy9vh4R.js";import{u as ie}from"../chunks/CxMT74xI.js";function z(e,c,y=c){var m=K();L(e,"input",i=>{var t=i?e.defaultValue:e.value;if(t=q(e)?B(t):t,y(t),m&&t!==(t=c())){var d=e.selectionStart,_=e.selectionEnd;e.value=t??"",_!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(_,e.value.length))}}),(U&&e.defaultValue!==e.value||Q(c)==null&&e.value)&&y(q(e)?B(e.value):e.value),R(()=>{var i=c();q(e)&&i===B(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function q(e){var c=e.type;return c==="number"||c==="range"}function B(e){return e===""?null:+e}var de=O('<div class="aspect-square flex items-center justify-center rounded bg-gray-800 text-gray-100"> </div>'),ue=O('<fieldset class="space-y-2 rounded border border-gray-700 p-4"><legend class="px-2 text-gray-300"></legend> <input placeholder="one, two, three, four" class="w-full rounded border border-gray-600 bg-gray-800 p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/> <input placeholder="Clue/description" class="w-full rounded border border-gray-600 bg-gray-800 p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/></fieldset>'),ce=O('<main class="min-h-screen bg-gray-900 text-gray-100 p-4 md:p-8"><div class="mx-auto max-w-6xl space-y-6"><div class="flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0"><button class="w-full sm:w-auto rounded bg-gray-700 px-3 py-1 text-gray-200 hover:bg-gray-600">← Back to Board</button> <h2 class="text-lg font-semibold text-center">Create a New Puzzle</h2> <button class="w-full sm:w-auto rounded bg-green-600 px-3 py-1 text-white hover:bg-green-500">All Puzzles</button> <a href="/my-puzzles" class="hover:underline px-2 py-1 rounded hover:bg-gray-700">My Puzzles</a></div> <div class="flex flex-col md:flex-row gap-6"><div class="w-full md:w-1/2"><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1 sm:gap-2"></div></div> <div class="w-full md:w-1/2 space-y-6 overflow-auto max-h-[80vh]"><input placeholder="Puzzle Title" class="w-full rounded border border-gray-700 bg-gray-800 p-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/> <input placeholder="Author" class="w-full rounded border border-gray-700 bg-gray-800 p-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"/> <!> <button class="w-full rounded bg-green-600 py-3 font-semibold text-white shadow hover:bg-green-500">Generate</button></div></div></div></main>');function _e(e,c){Y(c,!1);const y=h();ee(ie)||x("/login");let m=h(""),i=h(""),t=h(Array.from({length:4},()=>({answersCsv:"",description:""}))),d=h({});async function _(){if(!r(m)||!r(i)){alert("Title and author are required.");return}const s={title:r(m),author:r(i),groups:r(t).map(o=>({answers:o.answersCsv.split(",").map(a=>a.trim()).filter(Boolean),description:o.description}))};if(!s.groups.every(o=>o.answers.length===4)){alert("Each group needs exactly 4 comma-separated words.");return}const l=await ne(s);x(`/puzzles/${l}`)}X(()=>(r(t),r(d)),()=>{const s=[];r(t).forEach((a,n)=>{a.answersCsv.split(",").map(u=>u.trim()).forEach((u,p)=>{u&&s.push({key:`${n}-${p}`,word:u})})});for(const a of Object.keys(r(d)))s.some(n=>n.key===a)||delete r(d)[a];const l=new Set(Object.values(r(d))),o=Array.from({length:16},(a,n)=>n).filter(a=>!l.has(a));for(const{key:a}of s)if(!(a in r(d))&&o.length){const n=o.splice(Math.floor(Math.random()*o.length),1)[0];se(d,r(d)[a]=n)}}),X(()=>(r(d),r(t)),()=>{$(y,(()=>{var l;const s=Array(16).fill("—");for(const[o,a]of Object.entries(r(d))){const[n,u]=o.split("-").map(Number),p=(l=r(t)[n])==null?void 0:l.answersCsv.split(",").map(b=>b.trim())[u];p&&(s[a]=p)}return s})())}),re(),J();var k=ce(),S=v(k),C=v(S),G=v(C),H=g(G,4);te(2),f(C);var N=g(C,2),A=v(N),T=v(A);D(T,5,()=>r(y),F,(s,l)=>{var o=de(),a=v(o,!0);f(o),oe(()=>le(a,r(l))),P(s,o)}),f(T),f(A);var V=g(A,2),j=v(V);w(j);var E=g(j,2);w(E);var W=g(E,2);D(W,1,()=>r(t),F,(s,l,o)=>{var a=ue(),n=v(a);n.textContent=`Group ${o+1}`;var u=g(n,2);w(u);var p=g(u,2);w(p),f(a),z(u,()=>r(l).answersCsv,b=>(r(l).answersCsv=b,Z(()=>r(t)))),z(p,()=>r(l).description,b=>(r(l).description=b,Z(()=>r(t)))),P(s,a)});var I=g(W,2);f(V),f(N),f(S),f(k),M("click",G,()=>x("/")),M("click",H,()=>x("/puzzles")),z(j,()=>r(m),s=>$(m,s)),z(E,()=>r(i),s=>$(i,s)),M("click",I,_),P(e,k),ae()}export{_e as component};
